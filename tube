<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>to Do VUE</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@2.4.4/dist/vue.js"></script>
</head>
<body>
<div class="wrapper">
	<div id="app">
	    <input class="mainInput" v-on:keyup.13="addTask" type="text" v-model="innerText" placeholder="Хотите добавить новое задание?">
	    
	    <ul class="withoutMarker">
	        <li v-for="(task, index) in tasks"  v-bind:class="{'strike': task.checked}" v-show="task.activeFlag">
	            <input type="checkbox" v-model="task.checked">
	            <span v-show="task.visible" v-on:click="task.visible=!task.visible">{{ task.text }}</span>
	            <input type="text"  v-show="!task.visible" v-model="task.text" v-on:keyup.13="task.visible=!task.visible">
	            <div class="imageBtn">
	                <img src="pencil.png" v-on:click="task.visible=!task.visible" >
	                    <img src="delete.png" v-on:click="removeCurrentTask(index)">
	            </div>
	        </li>
	    </ul>
        <input class="counter" v-bind:value="counter">Незаконченных задач
	   
	   <br>
	    <br>
	    <div class="btnWrapper">
	        <button v-on:click="allTasksCounter">Все</button>
	        <button v-on:click="activeCounter">Активные</button>
	        <button v-on:click="doneCounter" >Законченные</button>
	        <button v-on:click="removeAllTasks" >Удалить все</button>
	    </div>
	</div>
</div>
</body>
<script>
    var vm = new Vue({
        el:'#app',
        data: {
            innerText:'',
            tasks:[],
            visible:true 
        },
        methods:{
            addTask: function(){
                this.tasks.push({'text':this.innerText, 'checked':false, 'visible': true, 'activeFlag':true});
                this.innerText = '';
            },
           removeCurrentTask : function(index){
                !this.tasks[index].checked,
                this.tasks.splice(index,1);
            },
            removeAllTasks: function(){
                this.tasks.splice(this.task);
            },
            activeCounter: function(){
                this.tasks.forEach(el => el.activeFlag = !el.checked);
            },
            allTasksCounter: function(){
                this.tasks.forEach(el => el.activeFlag = true); 
            },
            doneCounter: function(){
                this.tasks.forEach(el=> el.activeFlag = el.checked);
            }
        },
        computed: {
            counter: function() {
                var filteredTask = this.tasks.filter(task => !task.checked);
                return(filteredTask.length);
                         
        }
    }
})
</script>
</html>
